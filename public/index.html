<!DOCTYPE html>
<html>
<head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">


    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta charset="UTF-8"/>

</head>

<body class="cyan lighten-5">


<div id="vocabulario" class="">
    <nav class=" nav-extended cyan darken-2">
        <div class="nav-wrapper ">
            <img src="default.png" class="">
            <h1 class="brand-logo center">Implementación de la teoría de los lenguajes </h1>

        </div>
    </nav>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div class="container">
        <div class="row ">
            <div class="col s12 ">
                <div class="card">
                    <div class="card-content">
                        <h2 class="text-center">Configuracion</h2>
                        <div class="row">
                            <div class="input-field col s11">
                                <input id="alfabeto" type="text" class="validate " v-model="name_new_A">
                                <label for="alfabeto">Alfabeto</label>

                            </div>
                            <a class="btn-floating waves-effect waves-light  light-green" v-on:click="new_alfabeto">
                                <i class="material-icons">add</i>
                            </a>
                        </div>
                        <div class="row">
                            <div class="col s11">
                                <div class="input-field ">
                                    <input id="lenguaje" type="text" class="validate" v-model="name_new_L">
                                    <label for="lenguaje">Lenguaje</label>
                                </div>
                                <br>


                                <form action="#">
                                    <p v-for="alfabeto in Array.from(alfabetos) ">

                                        <label>
                                            <input name="group1" type="radio" :value="alfabeto.nombre"class="with-gap"
                                                   v-model="alfabeto_new_lenguaje"/>
                                            <span>{{alfabeto.nombre}}</span>
                                        </label>
                                    </p>

                                </form>

                            </div>
                            <br>
                            <br>
                            <br>
                            <br>

                            <a class="btn-floating waves-effect waves-light  light-green" v-on:click="new_lenguaje">
                                <i class="material-icons">add</i></a>
                        </div>


                    </div>

                </div>
            </div>


        </div>
    </div>


    <div class="container">
        <div class="row">
            <div class="col s12">
                <div class="card">
                    <div class="card-content">
                        <h2 class="text-center">Alfabetos</h2>
                        <div class="row">

                            <div class="input-field col s11">
                                <input id="simbolo" type="text" class="validate" v-model="simbolo">
                                <label for="simbolo">agregar un simbolo</label>
                            </div>


                            <form action="#" class=" col s11">
                                <p v-for="alfabeto in Array.from(alfabetos) ">

                                    <label>
                                        <input name="group1" type="radio" :value="alfabeto.nombre"class="with-gap"
                                               v-model="select_add_simbolo"/>
                                        <span>{{alfabeto.nombre}}</span>
                                    </label>
                                </p>

                            </form>


                            <br>
                            <a class="btn-floating waves-effect waves-light  light-green" v-on:click="addSimbolo">
                                <i class="material-icons">add</i>
                            </a>
                        </div>
                        <ul class="collection with-header">
                            <li class="collection-header"><h6>Alfabetos ingresados</h6></li>
                            <li v-for="alfabeto in Array.from(alfabetos) " class="collection-item">Alfabeto
                                {{alfabeto.nombre}}:{{Array.from(alfabeto.simbolos)}}
                            </li>

                        </ul>
                        <h4 class="text-center">Alfabetos a operar</h4>
                        <div class="row">
                            <div class="col s6">
                                <div class="input-field">

                                    <form action="#" class=" col s11">
                                        <p v-for="alfabeto in Array.from(alfabetos) ">

                                            <label>
                                                <input name="group1" type="radio" :value="alfabeto.nombre" class="with-gap"
                                                       v-model="select_a1"/>
                                                <span>{{alfabeto.nombre}}</span>
                                            </label>
                                        </p>

                                    </form>
                                </div>
                            </div>
                            <div class="col s6">
                                <div class="input-field">
                                    <form action="#" class=" col s11">
                                        <p v-for="alfabeto in Array.from(alfabetos) ">

                                            <label>
                                                <input name="group1" type="radio" :value="alfabeto.nombre" class="with-gap"
                                                       v-model="select_a2"/>
                                                <span>{{alfabeto.nombre}}</span>
                                            </label>
                                        </p>

                                    </form>
                                </div>
                            </div>
                        </div>
                        <div v-if="a1!=undefined && a2!=undefined">
                            <ul class="collection ">
                                <li class="collection-item">
                                    <h6>
                                        <span>Union {{a1.nombre}} y {{a2.nombre}}:{{Array.from(this.union(this.a1.simbolos,this.a2.simbolos))}}</span>
                                    </h6>
                                </li>
                                <li class="collection-item">
                                    <h66>
                                        <span>Diferencia {{a1.nombre}} y {{a2.nombre}}:{{Array.from(this.difference(this.a1.simbolos,this.a2.simbolos))}}</span>
                                    </h66>
                                </li>
                                <li class="collection-item">
                                    <h6>
                                        <span>Intercepcion {{a1.nombre}} y {{a2.nombre}}:{{Array.from(this.intersection(this.a1.simbolos,this.a2.simbolos))}}</span>
                                    </h6>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="container">
        <div class="row">
            <div class="col s12">
                <div class="card">
                    <div class="card-content">
                        <h2 class="text-center">Lenguajes</h2>
                        <div class="row">
                            <div class="input-field col s11 ">
                                <input id="palabra" type="text" class="validate" v-model="palabra">
                                <label for="palabra">agregar una palabra</label>
                            </div>
                            <div class="input-field col s11">
                                <form action="#">
                                    <p v-for="nombre in nombres_lenguajes ">

                                        <label>
                                            <input name="group1" type="radio" :value="nombre" class="with-gap"
                                                   v-model="select_add_palabra"/>
                                            <span>{{nombre}}</span>
                                        </label>
                                    </p>

                                </form>
                            </div>
                            <br>
                            <br>
                            <br>
                            <a class="btn-floating waves-effect waves-light  light-green" v-on:click="addpalabra">
                                <i class="material-icons">add</i></a>
                        </div>
                        <ul class="collection with-header" v-for="nombre in nombres_lenguajes ">
                            <li class="collection-header">
                                <h5>
                                    Lenguaje {{nombre}}:{{Array.from(getLenguaje(nombre).palabras)}}
                                </h5>
                            </li>
                            <li class="collection-item">
                                <h6>
                                    <span>Potencia de {{nombre}} :{{Array.from(concat_lenguaje(getLenguaje(nombre).palabras,getLenguaje(nombre).palabras))}}</span>
                                </h6>
                            </li>
                            <li class="collection-item">
                                <h6>
                                    <span>Inversa de {{nombre}}:{{Array.from(inversa_lenguaje(getLenguaje(nombre).palabras))}}</span>
                                </h6>
                            </li>
                            <li class="collection-item">
                                <h6>
                                    <span>Cardinalidad de {{nombre}}:{{Array.from(getLenguaje(nombre).palabras)}}</span>
                                </h6>
                            </li>

                        </ul>
                        <h4 class="text-center">Lenguajes a operar</h4>

                        <div class="row">
                            <div class="input-field col s6">
                                <form action="#">
                                    <p v-for="nombre in nombres_lenguajes ">

                                        <label>
                                            <input name="group1" type="radio" class="with-gap":value="nombre"
                                                   v-model="select_l1"/>
                                            <span>{{nombre}}</span>
                                        </label>
                                    </p>

                                </form>
                            </div>
                            <div class="input-field col s6">
                                <form action="#">
                                    <p v-for="nombre in nombres_lenguajes ">

                                        <label>
                                            <input name="group1" type="radio" class="with-gap" :value="nombre"
                                                   v-model="select_l2"/>
                                            <span>{{nombre}}</span>
                                        </label>
                                    </p>

                                </form>
                            </div>
                        </div>
                    </div>
                    <div v-if="l1!=undefined && l2!=undefined">
                        <ul class="collection with-header">

                            <li class="collection-item">
                                <h6>
                                    <span>Union {{l1.nombre}} y {{l2.nombre}}:{{Array.from(this.union(l1.palabras,l2.palabras))}}</span>
                                </h6>
                            </li>
                            <li class="collection-item">
                                <h6>
                                    <span>Diferencia {{l1.nombre}} y {{l2.nombre}}:{{Array.from(this.difference(l1.palabras,l2.palabras))}}</span>
                                </h6>
                            </li>
                            <li class="collection-item">
                                <h6>
                                    <span>Intercepcion {{l1.nombre}} y {{l2.nombre}}:{{Array.from(this.intersection(l1.palabras,l2.palabras))}}</span>
                                </h6>
                            </li>
                            <li class="collection-item">
                                <h6>
                                    <span>Concatenacion {{l1.nombre}} y {{l2.nombre}}:{{Array.from(this.concat_lenguaje(l1.palabras,l2.palabras))}}</span>
                                </h6>
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col s12">
                <div class="card">
                    <div class="card-content">
                        <h2 class="text-center">Palabras</h2>

                        <div class="input-field ">
                            <input id="palabras" type="text" class="validate" v-model="busqueda">
                            <label for="palabras"><i class="material-icons">search</i> Buscar palabras</label>
                        </div>
                        <table>
                            <thead>
                            <tr>
                                <th>Palabra</th>
                                <th>Inversa</th>
                                <th>Cardinalidad</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr v-for="palabra in palabras"
                                v-show="busqueda.length<0 || palabra.includes(busqueda)">

                                <td>
                                    <span>{{palabra}}</span>
                                </td>
                                </td>
                                <td>
                                    <span>{{palabra.split("").reverse().join("")}}</span>
                                </td>

                                <td>
                                    <span>{{palabra.length}}</span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="page-footer  cyan darken-2">
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <h5 class="white-text">Universidad Del Magdalena</h5>
                    <h6 class="grey-text text-lighten-4">Compiladores e interpretes - Daniel conzales</h6>
                </div>
                <div class="col l4 offset-l2 s12">
                    <h5 class="white-text">Miembros</h5>
                    <ul>
                        <li><h6 class="grey-text text-lighten-3" href="#!">Ana Herrera Orozco</h6></li>
                        <li><h6 class="grey-text text-lighten-3" href="#!">Rafael Maldonado</h6></li>
                        <li><h6 class="grey-text text-lighten-3" href="#!">Luis Quintero</h6></li>

                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container">
                © 2020 BY arc-aho
                <a class="grey-text text-lighten-4 right" href="#!">Ingenieria de sistemas</a>
            </div>
        </div>
    </footer>
</div>


<!--JavaScript at end of body for optimized loading-->
<script src="https://unpkg.com/vue"></script>
<script type="text/javascript">


    var AppLenguajes = new Vue({
        el: '#vocabulario',
        data: {
            alfabetos: new Set([]),
            simbolo: '',
            select_add_simbolo: '',
            palabra: '',
            select_lenguaje: '',
            busqueda: '',
            name_new_A: '',
            name_new_L: '',
            alfabeto_new_lenguaje: '',
            select_a1: '',
            select_a2: '',
            nombres_lenguajes: [],
            select_add_palabra: '',
            select_l1: '',
            select_l2: '',
            palabras: [],
            picked: ''

        },
        methods: {
            addSimbolo: function (e) {
                e.preventDefault();

                if (this.simbolo.length == 1) this.simbolo += '-'


                if (this.simbolo.length > 2) this.simbolo = this.simbolo.substring(0, 2);


                Array.from(this.alfabetos).forEach(alfabeto => {
                    if (alfabeto.nombre == this.select_add_simbolo) alfabeto.simbolos.add(this.simbolo)
                })
                console.log(this.alfabetos)

                this.simbolo = '';
            },
            addpalabra: function (e) {

                e.preventDefault();
                if (this.select_add_palabra=='')alert("escoja un lenguaje para agregarle palabras")

                if (this.palabra.length % 2 != 0) this.palabra += '-'


                Array.from(this.alfabetos).forEach(alfabeto => {

                    Array.from(alfabeto.lenguajes).forEach(lenguaje => {

                        if (lenguaje.nombre == this.select_add_palabra) {
                            for (let i = 0; i < this.palabra.length; i++) {
                                let simb = this.palabra.substring(i, i + 2);
                                let simb_esta = false
                                Array.from(alfabeto.simbolos).forEach(simbolo => {
                                    if (simb == simbolo) simb_esta = true
                                })

                                if (!simb_esta) {

                                    alert('La palabra: ' + this.palabra + " no cumple con el alfabeto " + alfabeto.nombre)
                                    return
                                }
                                i += 1
                            }
                            lenguaje.palabras.add(this.palabra)
                            this.palabras.push(this.palabra)
                        }


                    })

                })

                this.palabra = '';

            },


            union: function (setA, setB) {
                let _union = new Set(setA)
                for (let elem of setB) {
                    _union.add(elem)
                }
                return _union
            },

            intersection: function (setA, setB) {
                let _intersection = new Set()
                for (let elem of setB) {
                    if (setA.has(elem)) {
                        _intersection.add(elem)
                    }
                }
                return _intersection
            },
            difference: function (setA, setB) {
                let _difference = new Set(setA)
                for (let elem of setB) {
                    _difference.delete(elem)
                }
                return _difference
            },

            concat_lenguaje: function (lenguajeA, lenguajeB) {

                let concat = new Set([])

                Array.from(lenguajeA).forEach(elementA => Array.from(lenguajeB).forEach(elementB => concat.add(elementA + elementB)));

                return concat
            },

            inversa_lenguaje: function (lenguaje) {

                let inv = new Set([])

                Array.from(lenguaje).forEach(element => inv.add(element.split("").reverse().join("")));

                return inv

            },
            new_alfabeto: function (e) {
                e.preventDefault();

                this.alfabetos.add({
                    nombre: this.name_new_A,
                    simbolos: new Set([]),
                    lenguajes: new Set([])
                })
                this.name_new_A = ''
            },
            new_lenguaje: function (e) {
                e.preventDefault();
                if(this.alfabeto_new_lenguaje==''){
                    alert("primero ingrese y escoja un algabeto para el lenguaje")
                    return
                }
                Array.from(this.alfabetos).forEach(alfabeto => {
                    if (alfabeto.nombre == this.alfabeto_new_lenguaje) alfabeto.lenguajes.add({
                        nombre: this.name_new_L,
                        palabras: new Set([]),
                        n_alfabeto: alfabeto.nombre
                    })
                })
                this.nombres_lenguajes.push(this.name_new_L)
                this.name_new_L = ''
                console.log(this.alfabetos)
            },
            getAlfabeto: function (nombre) {
                var a
                Array.from(this.alfabetos).forEach(alfabeto => {
                    if (alfabeto.nombre == nombre) {
                        console.log(alfabeto)
                        a = alfabeto
                    }

                })
                return a
            },
            getLenguaje: function (nombre) {
                var l
                Array.from(this.alfabetos).forEach(alfabeto => {

                    Array.from(alfabeto.lenguajes).forEach(lenguaje => {
                        if (lenguaje.nombre == nombre) {
                            l = lenguaje
                        }
                    })

                })
                console.log(l)
                return l
            },

        },
        computed: {
            a1: function () {
                return this.getAlfabeto(this.select_a1)
            },
            a2: function () {
                return this.getAlfabeto(this.select_a2)

            },
            l1: function () {
                return this.getLenguaje(this.select_l1)
            },
            l2: function () {
                return this.getLenguaje(this.select_l2)

            }
        }

    });
</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

<script>


    $(document).ready(function () {
        $('select').formSelect();
        $('.sidenav').sidenav();

    });


</script>
</body>
</html>
